{"version":3,"file":"index.js","sources":["../src/js/modal.js","../src/js/clientStorage.js","../src/js/clientEditor.js","../src/js/search-client.js","../src/js/add-client.js","../src/main.js"],"sourcesContent":["// Управление открытием/закрытием модалок\n\nconst toggleModal = selector => {\n  const modal = document.querySelector(selector);\n  if (modal) {\n    modal.classList.toggle('is-hidden');\n  }\n};\n\nconst modalMap = {\n  'dashboard-add-client': '.add-client-modal',\n  'dashboard-search-client': '.search-client-modal',\n  'dashboard-clients-list': '.clients-list-modal',\n  'dashboard-map': '.map-modal',\n};\n\n// Открытие модалок\n\ndocument.querySelector('.nav-buttons').addEventListener('click', event => {\n  const button = event.target.closest('.dashboard-button');\n  if (!button) return;\n\n  for (const className of button.classList) {\n    if (modalMap[className]) {\n      toggleModal(modalMap[className]);\n      break;\n    }\n  }\n});\n\n// Закрытие модалок\n\ndocument.querySelectorAll('.btn-exit ').forEach(btn => {\n  btn.addEventListener('click', () => {\n    const modal = btn.closest('.backdrop');\n    if (modal) {\n      modal.classList.add('is-hidden');\n    }\n  });\n});\n\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    document.querySelectorAll('.backdrop').forEach(modal => {\n      modal.classList.add('is-hidden');\n    });\n  }\n});\n","// Управление клиентами в localStorage\n\nexport function getClients() {\n  return JSON.parse(localStorage.getItem('clientData')) || [];\n}\n\nexport function saveClients(clients) {\n  localStorage.setItem('clientData', JSON.stringify(clients));\n}\n\nexport function updateClient(updatedClient) {\n  const clients = getClients();\n  const index = clients.findIndex(c => c.id === updatedClient.id);\n  if (index !== -1) {\n    clients[index] = updatedClient;\n    saveClients(clients);\n  }\n}\n\nexport function deleteClient(id) {\n  const clients = getClients();\n  const updated = clients.filter(client => String(client.id) !== String(id));\n  localStorage.setItem('clientData', JSON.stringify(updated));\n}\n","// Управление редактированием клиента\n\nimport { updateClient } from './clientStorage.js';\n\nlet currentOnUpdate = null;\n\nexport function openEditModal(client, onUpdate) {\n  const modal = document.querySelector('.edit-client-modal');\n  if (!modal) {\n    return;\n  }\n\n  modal.classList.remove('is-hidden');\n\n  currentOnUpdate = typeof onUpdate === 'function' ? onUpdate : null;\n\n  const idInput = modal.querySelector('#edit-id');\n  const nameInput = modal.querySelector('#edit-name');\n  const surnameInput = modal.querySelector('#edit-surname');\n  const phoneInput = modal.querySelector('#edit-phone');\n  const locationInput = modal.querySelector('#edit-location');\n  const addressInput = modal.querySelector('#edit-address');\n\n  if (\n    !idInput ||\n    !nameInput ||\n    !surnameInput ||\n    !phoneInput ||\n    !locationInput ||\n    !addressInput\n  ) {\n    return;\n  }\n\n  idInput.value = client.id;\n  nameInput.value = client.name;\n  surnameInput.value = client.surname;\n  phoneInput.value = client.phone;\n  locationInput.value = client.location || '';\n  addressInput.value = client.address || '';\n}\n\nexport function setupEditForm() {\n  const form = document.querySelector('.edit-client-form');\n  if (!form) {\n    return;\n  }\n\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n\n    const updatedClient = {\n      id: form.querySelector('#edit-id')?.value.trim() || '',\n      name: form.querySelector('#edit-name')?.value.trim() || '',\n      surname: form.querySelector('#edit-surname')?.value.trim() || '',\n      phone: form.querySelector('#edit-phone')?.value.trim() || '',\n      location: form.querySelector('#edit-location')?.value.trim() || '',\n      address: form.querySelector('#edit-address')?.value.trim() || '',\n    };\n\n    updateClient(updatedClient);\n\n    const modal = document.querySelector('.edit-client-modal');\n    if (modal) modal.classList.add('is-hidden');\n\n    if (typeof currentOnUpdate === 'function') {\n      currentOnUpdate(updatedClient);\n    }\n  });\n}\n","import { getClients } from './clientStorage.js';\nimport { openEditModal } from './clientEditor.js';\nimport { deleteClient } from './clientStorage.js';\n\nexport function setupSearchClient() {\n  const modal = document.querySelector('.search-client-modal');\n  if (!modal) return;\n\n  const form = modal.querySelector('.dashboard-modal__form');\n  const resultBlock = modal.querySelector('.search-client-result');\n  const dataContent = modal.querySelector('.data-content');\n\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n\n    const id = form.id.value.trim();\n    const name = form.name.value.trim().toLowerCase();\n    const surname = form.surname.value.trim().toLowerCase();\n    const phone = form.phone.value.trim();\n\n    const storedClients = getClients();\n\n    const foundClient = storedClients.find(\n      client =>\n        (!id || String(client.id) === id) &&\n        (!name || client.name.toLowerCase() === name) &&\n        (!surname || client.surname.toLowerCase() === surname) &&\n        (!phone || client.phone === phone)\n    );\n\n    const renderClient = client => {\n      dataContent.innerHTML = `\n        <p><strong>ID:</strong> ${client.id}</p>\n        <p><strong>Имя:</strong> ${client.name}</p>\n        <p><strong>Фамилия:</strong> ${client.surname}</p>\n        <p><strong>Телефон:</strong> ${client.phone}</p>\n        <p><strong>Город/Село:</strong> ${client.location || ''}</p>\n        <p><strong>Адрес:</strong> ${client.address || ''}</p>\n      `;\n    };\n\n    if (foundClient) {\n      renderClient(foundClient);\n\n      const editBtn = modal.querySelector('.change-info');\n      editBtn.onclick = () => {\n        openEditModal(foundClient, updatedClient => {\n          renderClient(updatedClient);\n          Object.assign(foundClient, updatedClient);\n        });\n      };\n      const deleteBtn = modal.querySelector('.cancel');\n      deleteBtn.onclick = () => {\n        if (confirm('Удалить этого клиента?')) {\n          deleteClient(foundClient.id);\n          dataContent.innerHTML = `<p>Клиент удалён</p>`;\n        }\n      };\n    } else {\n      dataContent.innerHTML = `<p>Клиент не найден</p>`;\n    }\n\n    resultBlock.classList.remove('is-hidden');\n    form.reset();\n  });\n}\n","// Логика добавления нового клиента и сохранения его данных в localStorage\n\nimport { getClients, saveClients } from './clientStorage.js';\n\nexport function setupAddClient() {\n  const addClientForm = document.querySelector('.add-client__form');\n  if (!addClientForm) return;\n\n  addClientForm.addEventListener('submit', evt => {\n    evt.preventDefault();\n\n    const formData = {};\n    for (let element of addClientForm.elements) {\n      if (element.name) {\n        formData[element.name] = element.value.trim();\n      }\n    }\n\n    formData.id = Date.now().toString();\n\n    const currentData = getClients();\n    currentData.push(formData);\n    saveClients(currentData);\n\n    addClientForm.reset();\n  });\n}\n","import './js/modal';\n\nimport { setupSearchClient } from './js/search-client.js';\nimport { setupAddClient } from './js/add-client.js';\nimport { setupEditForm } from './js/clientEditor.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setupAddClient();\n  setupSearchClient();\n  setupEditForm();\n});\n"],"names":["toggleModal","selector","modal","modalMap","event","button","className","btn","getClients","saveClients","clients","updateClient","updatedClient","index","c","deleteClient","id","updated","client","currentOnUpdate","openEditModal","onUpdate","idInput","nameInput","surnameInput","phoneInput","locationInput","addressInput","setupEditForm","form","_a","_b","_c","_d","_e","_f","setupSearchClient","resultBlock","dataContent","name","surname","phone","foundClient","renderClient","editBtn","deleteBtn","setupAddClient","addClientForm","evt","formData","element","currentData"],"mappings":"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"}