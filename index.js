(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const $=e=>{const t=document.querySelector(e);t&&t.classList.toggle("is-hidden")},S={"dashboard-add-client":".add-client-modal","dashboard-search-client":".search-client-modal","dashboard-clients-list":".clients-list-modal","dashboard-map":".map-modal"};document.querySelector(".nav-buttons").addEventListener("click",e=>{const t=e.target.closest(".dashboard-button");if(t){for(const n of t.classList)if(S[n]){$(S[n]);break}}});document.querySelectorAll(".btn-exit").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".backdrop"),n=document.querySelector(".search-client-result"),o=document.querySelector(".data-content");t&&(n.classList.add("is-hidden"),o.innerHTML="",t.classList.add("is-hidden"))})});document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".backdrop").forEach(t=>{t.classList.add("is-hidden")})});function p(){return JSON.parse(localStorage.getItem("clientData"))||[]}function h(e){localStorage.setItem("clientData",JSON.stringify(e))}function b(e){const t=p(),n=t.findIndex(o=>o.id===e.id);n!==-1&&(t[n]=e,h(t))}function q(e){const n=p().filter(o=>String(o.id)!==String(e));localStorage.setItem("clientData",JSON.stringify(n))}let f=null;function L(e,t){const n=document.querySelector(".edit-client-modal");if(!n)return;const o=n.querySelector("#edit-id"),r=n.querySelector("#edit-name"),s=n.querySelector("#edit-surname"),c=n.querySelector("#edit-phone"),l=n.querySelector("#country"),u=n.querySelector("#edit-city"),m=n.querySelector("#edit-address"),d=n.querySelector("#coordinates");!o||!r||!s||!c||!l||!u||!m||!d||(o.value="",r.value="",s.value="",c.value="",l.value="",u.value="",m.value="",d.value="",o.value=e.id||"",r.value=e.name||"",s.value=e.surname||"",c.value=e.phone||"",l.value=e.country||"Украина",u.value=e.city||"",m.value=e.address||"",d.value=e.coordinates||"",f=typeof t=="function"?t:null,n.classList.remove("is-hidden"))}function C(){const e=document.querySelector(".edit-client-form");e&&e.addEventListener("submit",t=>{var r,s,c,l,u,m,d,a;t.preventDefault();const n={id:((r=e.querySelector("#edit-id"))==null?void 0:r.value.trim())||"",name:((s=e.querySelector("#edit-name"))==null?void 0:s.value.trim())||"",surname:((c=e.querySelector("#edit-surname"))==null?void 0:c.value.trim())||"",phone:((l=e.querySelector("#edit-phone"))==null?void 0:l.value.trim())||"",country:((u=e.querySelector("#country"))==null?void 0:u.value.trim())||"",city:((m=e.querySelector("#edit-city"))==null?void 0:m.value.trim())||"",address:((d=e.querySelector("#edit-address"))==null?void 0:d.value.trim())||"",coordinates:((a=e.querySelector("#coordinates"))==null?void 0:a.value.trim())||""};b(n);const o=document.querySelector(".edit-client-modal");o&&o.classList.add("is-hidden"),typeof f=="function"&&f(n)})}const v=document.querySelector(".add-coordinates-btn");v&&(v.onclick=()=>{navigator.geolocation.getCurrentPosition(e=>{const t=document.querySelector(".edit-client-modal"),n=t==null?void 0:t.querySelector("#coordinates");n?(n.value=`${e.coords.latitude}, ${e.coords.longitude}`,console.log("Координаты установлены:",n.value)):console.warn("Поле #coordinates не найдено")},e=>{console.error("Ошибка геолокации:",e)})});function I(){const e=document.querySelector(".search-client-modal");if(!e)return;const t=e.querySelector(".dashboard-modal__form"),n=e.querySelector(".search-client-result"),o=e.querySelector(".data-content");t.addEventListener("submit",r=>{r.preventDefault();const s=t.id.value.trim(),c=t.name.value.trim().toLowerCase(),l=t.surname.value.trim().toLowerCase(),u=t.phone.value.trim(),d=p().find(i=>(!s||String(i.id)===s)&&(!c||i.name.toLowerCase().trim()===c)&&(!l||i.surname.toLowerCase().trim()===l)&&(!u||i.phone===u)),a=i=>{o.innerHTML=`
        <p><strong>ID:</strong> ${i.id}</p>
        <p><strong>Имя:</strong> ${i.name}</p>
        <p><strong>Фамилия:</strong> ${i.surname}</p>
        <p><strong>Телефон:</strong> ${i.phone}</p>
        <p><strong>Страна:</strong> ${i.country||""}</p>
        <p><strong>Город/Село:</strong> ${i.city||""}</p>
        <p><strong>Адрес:</strong> ${i.address||""}</p>
        <p><strong>Координаты:</strong> ${i.coordinates||""}</p>
      `};if(d){a(d),n.classList.remove("is-hidden");const i=n.querySelector(".change-info"),g=n.querySelector(".cancel");i&&(i.onclick=()=>{L(d,y=>{Object.assign(d,y),a(y)})}),g&&(g.onclick=()=>{confirm("Удалить этого клиента?")&&(q(d.id),o.innerHTML="<p>Клиент удалён</p>")})}else o.innerHTML="<p>Клиент не найден</p>",n.classList.remove("is-hidden");t.reset()})}function E(){const e=document.querySelector(".add-client__form");e&&e.addEventListener("submit",t=>{t.preventDefault();const n={};for(let r of e.elements)r.name&&(n[r.name]=r.value.trim());n.id=Date.now().toString();const o=p();o.push(n),h(o),e.reset()})}function D(){const e=document.querySelector(".dashboard-clients-list"),t=document.querySelector(".clients-list-modal"),n=t==null?void 0:t.querySelector(".clients-list__allClients"),o=document.querySelector(".action-btn-group");!e||!t||!n||!o||e.addEventListener("click",()=>{M(n,o)})}function M(e,t){const n=p();if(e.innerHTML="",n.length===0){e.innerHTML='<li><p class="clients-list__no-clients">Клиенты не найдены.</p></li>';return}n.forEach((o,r)=>{const s=document.createElement("li");s.className="clients-list__client";const c=document.createElement("div");c.className="data-content",c.innerHTML=`
    <p><strong>№</strong> ${r+1}</p>
      <p><strong>ID:</strong> ${o.id}</p>
      <p><strong>Имя:</strong> ${o.name}</p>
      <p><strong>Фамилия:</strong> ${o.surname}</p>
      <p><strong>Телефон:</strong> ${o.phone}</p>
      <p><strong>Страна:</strong> ${o.country}</p>
      <p><strong>Город/село:</strong> ${o.city||""}</p>
      <p><strong>Адрес:</strong> ${o.address||""}</p>
      <p><strong>Координаты:</strong> ${o.coordinates}</p>
    `;const l=t.cloneNode(!0),u=l.querySelector(".change-info"),m=l.querySelector(".map"),d=l.querySelector(".cancel");u.onclick=()=>{L(o,a=>{Object.assign(o,a),c.innerHTML=`
          <p><strong>ID:</strong> ${a.id}</p>
          <p><strong>Имя:</strong> ${a.name}</p>
          <p><strong>Фамилия:</strong> ${a.surname}</p>
          <p><strong>Телефон:</strong> ${a.phone}</p>
          <p><strong>Страна:</strong> ${a.country}</p>
          <p><strong>Город/село:</strong> ${a.city||""}</p>
          <p><strong>Адрес:</strong> ${a.address||""}</p>
          <p><strong>Координаты:</strong> ${a.coordinates}</p>
        `})},m.onclick=()=>{alert("Функция карты пока не реализована")},d.onclick=()=>{confirm("Удалить клиента?")&&(q(o.id),s.remove())},s.append(c,l),e.appendChild(s)})}document.addEventListener("DOMContentLoaded",()=>{E(),I(),C(),D()});
//# sourceMappingURL=index.js.map
