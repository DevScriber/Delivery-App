(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const v=e=>{const t=document.querySelector(e);t&&t.classList.toggle("is-hidden")},g={"dashboard-add-client":".add-client-modal","dashboard-search-client":".search-client-modal","dashboard-clients-list":".clients-list-modal","dashboard-map":".map-modal"};document.querySelector(".nav-buttons").addEventListener("click",e=>{const t=e.target.closest(".dashboard-button");if(t){for(const n of t.classList)if(g[n]){v(g[n]);break}}});document.querySelectorAll(".btn-exit ").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".backdrop");t&&t.classList.add("is-hidden")})});document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".backdrop").forEach(t=>{t.classList.add("is-hidden")})});function u(){return JSON.parse(localStorage.getItem("clientData"))||[]}function S(e){localStorage.setItem("clientData",JSON.stringify(e))}function q(e){const t=u(),n=t.findIndex(s=>s.id===e.id);n!==-1&&(t[n]=e,S(t))}function L(e){const n=u().filter(s=>String(s.id)!==String(e));localStorage.setItem("clientData",JSON.stringify(n))}let f=null;function b(e,t){const n=document.querySelector(".edit-client-modal");if(!n)return;n.classList.remove("is-hidden"),f=typeof t=="function"?t:null;const s=n.querySelector("#edit-id"),o=n.querySelector("#edit-name"),r=n.querySelector("#edit-surname"),a=n.querySelector("#edit-phone"),c=n.querySelector("#edit-location"),d=n.querySelector("#edit-address");!s||!o||!r||!a||!c||!d||(s.value=e.id,o.value=e.name,r.value=e.surname,a.value=e.phone,c.value=e.location||"",d.value=e.address||"")}function C(){const e=document.querySelector(".edit-client-form");e&&e.addEventListener("submit",t=>{var o,r,a,c,d,m;t.preventDefault();const n={id:((o=e.querySelector("#edit-id"))==null?void 0:o.value.trim())||"",name:((r=e.querySelector("#edit-name"))==null?void 0:r.value.trim())||"",surname:((a=e.querySelector("#edit-surname"))==null?void 0:a.value.trim())||"",phone:((c=e.querySelector("#edit-phone"))==null?void 0:c.value.trim())||"",location:((d=e.querySelector("#edit-location"))==null?void 0:d.value.trim())||"",address:((m=e.querySelector("#edit-address"))==null?void 0:m.value.trim())||""};q(n);const s=document.querySelector(".edit-client-modal");s&&s.classList.add("is-hidden"),typeof f=="function"&&f(n)})}function E(){const e=document.querySelector(".search-client-modal");if(!e)return;const t=e.querySelector(".dashboard-modal__form"),n=e.querySelector(".search-client-result"),s=e.querySelector(".data-content");t.addEventListener("submit",o=>{o.preventDefault();const r=t.id.value.trim(),a=t.name.value.trim().toLowerCase(),c=t.surname.value.trim().toLowerCase(),d=t.phone.value.trim(),l=u().find(i=>(!r||String(i.id)===r)&&(!a||i.name.toLowerCase()===a)&&(!c||i.surname.toLowerCase()===c)&&(!d||i.phone===d)),p=i=>{s.innerHTML=`
        <p><strong>ID:</strong> ${i.id}</p>
        <p><strong>Имя:</strong> ${i.name}</p>
        <p><strong>Фамилия:</strong> ${i.surname}</p>
        <p><strong>Телефон:</strong> ${i.phone}</p>
        <p><strong>Город/Село:</strong> ${i.location||""}</p>
        <p><strong>Адрес:</strong> ${i.address||""}</p>
      `};if(l){p(l);const i=e.querySelector(".change-info");i.onclick=()=>{b(l,y=>{p(y),Object.assign(l,y)})};const h=e.querySelector(".cancel");h.onclick=()=>{confirm("Удалить этого клиента?")&&(L(l.id),s.innerHTML="<p>Клиент удалён</p>")}}else s.innerHTML="<p>Клиент не найден</p>";n.classList.remove("is-hidden"),t.reset()})}function I(){const e=document.querySelector(".add-client__form");e&&e.addEventListener("submit",t=>{t.preventDefault();const n={};for(let o of e.elements)o.name&&(n[o.name]=o.value.trim());n.id=Date.now().toString();const s=u();s.push(n),S(s),e.reset()})}document.addEventListener("DOMContentLoaded",()=>{I(),E(),C()});
//# sourceMappingURL=index.js.map
