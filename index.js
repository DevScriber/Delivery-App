(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const B=e=>{const n=document.querySelector(e);n&&n.classList.toggle("is-hidden")},C={"dashboard-add-client":".add-client-modal","dashboard-search-client":".search-client-modal","dashboard-clients-list":".clients-list-modal","dashboard-map":".map-modal"};document.querySelector(".nav-buttons").addEventListener("click",e=>{const n=e.target.closest(".dashboard-button");if(n){for(const o of n.classList)if(C[o]){B(C[o]);break}}});document.querySelectorAll(".btn-exit").forEach(e=>{e.addEventListener("click",()=>{const n=e.closest(".backdrop"),o=document.querySelector(".search-client-result"),t=document.querySelector(".data-content");n&&(o.classList.add("is-hidden"),t.innerHTML="",n.classList.add("is-hidden"))})});document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".backdrop").forEach(n=>{n.classList.add("is-hidden")})});function S(){return JSON.parse(localStorage.getItem("clientData"))||[]}function w(e){localStorage.setItem("clientData",JSON.stringify(e))}function D(e){const n=S(),o=n.findIndex(t=>t.id===e.id);o!==-1&&(n[o]=e,w(n))}function I(e){const o=S().filter(t=>String(t.id)!==String(e));localStorage.setItem("clientData",JSON.stringify(o))}let L=null;function N(e,n){const o=document.querySelector(".edit-client-modal");if(!o)return;const t=o.querySelector("#edit-id"),r=o.querySelector("#edit-name"),s=o.querySelector("#edit-surname"),c=o.querySelector("#edit-phone"),d=o.querySelector("#country"),u=o.querySelector("#edit-region"),m=o.querySelector("#edit-city"),l=o.querySelector("#edit-address"),i=o.querySelector("#coordinates");!t||!r||!s||!c||!d||!u||!m||!l||!i||(t.value="",r.value="",s.value="",c.value="",d.value="",u.value="",m.value="",l.value="",i.value="",t.value=e.id||"",r.value=e.name||"",s.value=e.surname||"",c.value=e.phone||"",d.value=e.country||"Украина",u.value=e.region||"Винницкая область",m.value=e.city||"",l.value=e.address||"",i.value=e.coordinates||"",L=typeof n=="function"?n:null,o.classList.remove("is-hidden"))}function M(){const e=document.querySelector(".edit-client-form");e&&e.addEventListener("submit",n=>{var r,s,c,d,u,m,l,i,a;n.preventDefault();const o={id:((r=e.querySelector("#edit-id"))==null?void 0:r.value.trim())||"",name:((s=e.querySelector("#edit-name"))==null?void 0:s.value.trim())||"",surname:((c=e.querySelector("#edit-surname"))==null?void 0:c.value.trim())||"",phone:((d=e.querySelector("#edit-phone"))==null?void 0:d.value.trim())||"",country:((u=e.querySelector("#country"))==null?void 0:u.value.trim())||"",region:((m=e.querySelector("#edit-region"))==null?void 0:m.value.trim())||"",city:((l=e.querySelector("#edit-city"))==null?void 0:l.value.trim())||"",address:((i=e.querySelector("#edit-address"))==null?void 0:i.value.trim())||"",coordinates:((a=e.querySelector("#coordinates"))==null?void 0:a.value.trim())||""};D(o);const t=document.querySelector(".edit-client-modal");t&&t.classList.add("is-hidden"),typeof L=="function"&&L(o)})}function E(e,n,o){const t=document.querySelector(e),r=t==null?void 0:t.querySelector(o),s=t==null?void 0:t.querySelector(n);!t||!r||!s||(r.onclick=()=>{navigator.geolocation.getCurrentPosition(c=>{s.value=`${c.coords.latitude}, ${c.coords.longitude}`,console.log("Координаты установлены:",s.value)},c=>{console.error("Ошибка геолокации:",c)})})}E(".add-client-modal","#coordinates",".add-coordinates-btn");function O(){const e=document.querySelector(".search-client-modal");if(!e)return;const n=e.querySelector(".dashboard-modal__form"),o=e.querySelector(".search-client-result"),t=e.querySelector(".data-content");n.addEventListener("submit",r=>{r.preventDefault();const s=n.id.value.trim(),c=n.name.value.trim().toLowerCase(),d=n.surname.value.trim().toLowerCase(),u=n.phone.value.trim(),l=S().find(a=>(!s||String(a.id)===s)&&(!c||a.name.toLowerCase().trim()===c)&&(!d||a.surname.toLowerCase().trim()===d)&&(!u||a.phone===u)),i=a=>{t.innerHTML=`
        <p><strong>ID:</strong> ${a.id}</p>
        <p><strong>Имя:</strong> ${a.name}</p>
        <p><strong>Фамилия:</strong> ${a.surname}</p>
        <p><strong>Телефон:</strong> ${a.phone}</p>
        <p><strong>Страна:</strong> ${a.country||""}</p>
        <p><strong>Область:</strong> ${a.region||""}</p>
        <p><strong>Город/Село:</strong> ${a.city||""}</p>
        <p><strong>Адрес:</strong> ${a.address||""}</p>
        <p><strong>Координаты:</strong> ${a.coordinates||""}</p>
      `};if(l){i(l),o.classList.remove("is-hidden");const a=o.querySelector(".change-info"),q=o.querySelector(".cancel"),v=o.querySelector(".map");a&&(a.onclick=()=>{N(l,p=>{Object.assign(l,p),i(p)})}),q&&(q.onclick=()=>{confirm("Удалить этого клиента?")&&(I(l.id),t.innerHTML="<p>Клиент удалён</p>")}),v&&(v.onclick=()=>{var y;const p=(y=l.coordinates)==null?void 0:y.trim();if(!p){alert("У клиента нет координат");return}const[g,f]=p.split(",").map(Number);if(isNaN(g)||isNaN(f)){alert("Неверный формат координат");return}const h=`https://www.google.com/maps?q=${g},${f}`;window.open(h,"_blank")})}else t.innerHTML="<p>Клиент не найден</p>",o.classList.remove("is-hidden");n.reset()})}function _(){const e=document.querySelector(".add-client__form");e&&e.addEventListener("submit",n=>{n.preventDefault();const o={};for(let r of e.elements)r.name&&(o[r.name]=r.value.trim());o.id=Date.now().toString();const t=S();t.push(o),w(t),e.reset()})}E(".edit-client-modal","#coordinates",".add-coordinates-btn");function H(){const e=document.querySelector(".dashboard-clients-list"),n=document.querySelector(".clients-list-modal"),o=n==null?void 0:n.querySelector(".clients-list__allClients"),t=document.querySelector(".action-btn-group");!e||!n||!o||!t||e.addEventListener("click",()=>{T(o,t)})}function T(e,n){const o=S();if(e.innerHTML="",o.length===0){e.innerHTML='<li><p class="clients-list__no-clients">Клиенты не найдены.</p></li>';return}o.forEach((t,r)=>{const s=document.createElement("li");s.className="clients-list__client";const c=document.createElement("div");c.className="data-content",c.innerHTML=`
    <p><strong>№</strong> ${r+1}</p>
      <p><strong>ID:</strong> ${t.id}</p>
      <p><strong>Имя:</strong> ${t.name}</p>
      <p><strong>Фамилия:</strong> ${t.surname}</p>
      <p><strong>Телефон:</strong> ${t.phone}</p>
      <p><strong>Страна:</strong> ${t.country}</p>
      <p><strong>Область:</strong> ${t.region||""}</p>
      <p><strong>Город/село:</strong> ${t.city||""}</p>
      <p><strong>Адрес:</strong> ${t.address||""}</p>
      <p><strong>Координаты:</strong> ${t.coordinates}</p>
    `;const d=n.cloneNode(!0),u=d.querySelector(".change-info"),m=d.querySelector(".map"),l=d.querySelector(".cancel");u.onclick=()=>{N(t,i=>{Object.assign(t,i),c.innerHTML=`
          <p><strong>ID:</strong> ${i.id}</p>
          <p><strong>Имя:</strong> ${i.name}</p>
          <p><strong>Фамилия:</strong> ${i.surname}</p>
          <p><strong>Телефон:</strong> ${i.phone}</p>
          <p><strong>Страна:</strong> ${i.country}</p>
          <p></p><strong>Область:</strong> ${i.region||""}</p>
          <p><strong>Город/село:</strong> ${i.city||""}</p>
          <p><strong>Адрес:</strong> ${i.address||""}</p>
          <p><strong>Координаты:</strong> ${i.coordinates}</p>
        `})},m.onclick=()=>{var p,g,f,h,y;const i=(p=t.coordinates)==null?void 0:p.trim();if(i){const[$,b]=i.split(",").map(Number);if(!isNaN($)&&!isNaN(b)){const k=`https://www.google.com/maps?q=${$},${b}`;window.open(k,"_blank");return}}const a=[(g=t.country)==null?void 0:g.trim(),(f=t.region)==null?void 0:f.trim(),(h=t.city)==null?void 0:h.trim(),(y=t.address)==null?void 0:y.trim()].filter(Boolean);if(a.length===0){alert("Нет координат и недостаточно данных для адреса");return}const v=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.join(", "))}`;window.open(v,"_blank")},l.onclick=()=>{confirm("Удалить клиента?")&&(I(t.id),s.remove())},s.append(c,d),e.appendChild(s)})}document.addEventListener("DOMContentLoaded",()=>{_(),O(),M(),H()});
//# sourceMappingURL=index.js.map
